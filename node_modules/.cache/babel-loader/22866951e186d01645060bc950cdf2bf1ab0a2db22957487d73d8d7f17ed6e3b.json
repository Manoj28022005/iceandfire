{"ast":null,"code":"import React from'react';import{useCart}from'../components/ContextReducer';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Payment(_ref){let{user}=_ref;const cartItems=useCart();const navigate=useNavigate();const handlePaymentOption=async option=>{const confirmation=window.confirm(`You selected: ${option}. Confirm order?`);if(confirmation){try{const orderDetails={userId:user.id,// Ensure user info is passed as props or fetched from context\nname:user.name,email:user.email,phone:user.phone,items:cartItems,total:cartItems.reduce((total,item)=>total+item.price*item.quantity,0),paymentMethod:option,orderTime:new Date().toISOString()};const response=await fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(orderDetails)});if(response.ok){alert('Order placed successfully!');navigate('/');// Redirect to home or order success page\n}else{alert('Failed to place the order.');}}catch(error){console.error('Error placing order:',error);alert('Error placing order. Please try again.');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Choose Payment Option\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mt-3\",onClick:()=>handlePaymentOption('Cash on Delivery'),children:\"Cash on Delivery\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary mt-3 ms-3\",onClick:()=>handlePaymentOption('UPI'),children:\"UPI\"})]});}export default Payment;","map":{"version":3,"names":["React","useCart","useNavigate","jsx","_jsx","jsxs","_jsxs","Payment","_ref","user","cartItems","navigate","handlePaymentOption","option","confirmation","window","confirm","orderDetails","userId","id","name","email","phone","items","total","reduce","item","price","quantity","paymentMethod","orderTime","Date","toISOString","response","fetch","method","headers","body","JSON","stringify","ok","alert","error","console","className","children","onClick"],"sources":["D:/CODING/WEB_DEVELOPMENT/GOFOOD/mernapp/src/screens/Payment.jsx"],"sourcesContent":["import React from 'react';\r\nimport { useCart } from '../components/ContextReducer';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Payment({ user }) {\r\n  const cartItems = useCart();\r\n  const navigate = useNavigate();\r\n\r\n  const handlePaymentOption = async (option) => {\r\n    const confirmation = window.confirm(`You selected: ${option}. Confirm order?`);\r\n    if (confirmation) {\r\n      try {\r\n        const orderDetails = {\r\n          userId: user.id, // Ensure user info is passed as props or fetched from context\r\n          name: user.name,\r\n          email: user.email,\r\n          phone: user.phone,\r\n          items: cartItems,\r\n          total: cartItems.reduce((total, item) => total + item.price * item.quantity, 0),\r\n          paymentMethod: option,\r\n          orderTime: new Date().toISOString()\r\n        };\r\n\r\n        const response = await fetch('/api/orders', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(orderDetails)\r\n        });\r\n\r\n        if (response.ok) {\r\n          alert('Order placed successfully!');\r\n          navigate('/'); // Redirect to home or order success page\r\n        } else {\r\n          alert('Failed to place the order.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error placing order:', error);\r\n        alert('Error placing order. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h3>Choose Payment Option</h3>\r\n      <button className=\"btn btn-outline-primary mt-3\" onClick={() => handlePaymentOption('Cash on Delivery')}>\r\n        Cash on Delivery\r\n      </button>\r\n      <button className=\"btn btn-outline-primary mt-3 ms-3\" onClick={() => handlePaymentOption('UPI')}>\r\n        UPI\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Payment;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,8BAA8B,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAW,IAAV,CAAEC,IAAK,CAAC,CAAAD,IAAA,CACvB,KAAM,CAAAE,SAAS,CAAGT,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAU,mBAAmB,CAAG,KAAO,CAAAC,MAAM,EAAK,CAC5C,KAAM,CAAAC,YAAY,CAAGC,MAAM,CAACC,OAAO,CAAC,iBAAiBH,MAAM,kBAAkB,CAAC,CAC9E,GAAIC,YAAY,CAAE,CAChB,GAAI,CACF,KAAM,CAAAG,YAAY,CAAG,CACnBC,MAAM,CAAET,IAAI,CAACU,EAAE,CAAE;AACjBC,IAAI,CAAEX,IAAI,CAACW,IAAI,CACfC,KAAK,CAAEZ,IAAI,CAACY,KAAK,CACjBC,KAAK,CAAEb,IAAI,CAACa,KAAK,CACjBC,KAAK,CAAEb,SAAS,CAChBc,KAAK,CAAEd,SAAS,CAACe,MAAM,CAAC,CAACD,KAAK,CAAEE,IAAI,GAAKF,KAAK,CAAGE,IAAI,CAACC,KAAK,CAAGD,IAAI,CAACE,QAAQ,CAAE,CAAC,CAAC,CAC/EC,aAAa,CAAEhB,MAAM,CACrBiB,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACpC,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,aAAa,CAAE,CAC1CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACtB,YAAY,CACnC,CAAC,CAAC,CAEF,GAAIgB,QAAQ,CAACO,EAAE,CAAE,CACfC,KAAK,CAAC,4BAA4B,CAAC,CACnC9B,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAC,IAAM,CACL8B,KAAK,CAAC,4BAA4B,CAAC,CACrC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CD,KAAK,CAAC,wCAAwC,CAAC,CACjD,CACF,CACF,CAAC,CAED,mBACEnC,KAAA,QAAKsC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BzC,IAAA,OAAAyC,QAAA,CAAI,uBAAqB,CAAI,CAAC,cAC9BzC,IAAA,WAAQwC,SAAS,CAAC,8BAA8B,CAACE,OAAO,CAAEA,CAAA,GAAMlC,mBAAmB,CAAC,kBAAkB,CAAE,CAAAiC,QAAA,CAAC,kBAEzG,CAAQ,CAAC,cACTzC,IAAA,WAAQwC,SAAS,CAAC,mCAAmC,CAACE,OAAO,CAAEA,CAAA,GAAMlC,mBAAmB,CAAC,KAAK,CAAE,CAAAiC,QAAA,CAAC,KAEjG,CAAQ,CAAC,EACN,CAAC,CAEV,CAEA,cAAe,CAAAtC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}